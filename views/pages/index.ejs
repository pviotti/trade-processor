<% include ../partials/header %>    
        <h3>Transactions</h3>    
        <p>Welcome to the Trade Market Processor. <br/>
            The table below lists the currency exchange transactions processed so far, for a total of <%= count %>.</p>
        <section id="main">
            <table class="table table-hover">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Timestamp</th>
                    <th scope="col">User Id</th>
                    <th scope="col">Currency From</th>
                    <th scope="col">Currency To</th>
                    <th scope="col">Amount Sold</th>
                    <th scope="col">Amount Bought</th>
                    <th scope="col">Rate</th>
                    <th scope="col">Country</th>
                </tr>
            </thead>
            
            <% for (var i = 0; i < txns.length; i++) { %>
                <tr>
                    <td><%= txns[i].timestamp %></td>
                    <td><%= txns[i].user_id %></td>
                    <td><%= txns[i].currency_from %></td>
                    <td><%= txns[i].currency_to %></td>
                    <td><%= txns[i].amount_sell %></td>
                    <td><%= txns[i].amount_buy %></td>
                    <td><%= txns[i].rate %></td>
                    <td><%= txns[i].country %></td>
                </tr>    
            <% } %>
            </table>

            <nav aria-label="Page navigation">
            <ul class="pagination">
                    
                <li class="page-item <% if (currpage == 1) { %> disabled <% } %>">  
                    <a class="page-link" href="/?p=<%= currpage-1  %>">Previous</a>
                </li>

                <% if (pages <= 10) { %>
                    <% for (var i = 1; i <= pages; i++) { %>
                        <li class="page-item <% if (currpage == i) { %> active <% } %>">
                            <a class="page-link" href="/?p=<%= i %>"><%= i %></a>
                        </li>
                    <% } %>
                <% } else { %>
                    <% if (currpage-2 > 1) { %>
                        <li class="page-item disabled">
                            <a class="page-link" href="#">...</a>
                        </li>
                    <% } %>
                    <% for (var i = Math.max(1,currpage-2); i <= Math.min(pages,parseInt(currpage)+parseInt(2)); i++) { %>
                        <li class="page-item <% if (currpage == i) { %> active <% } %>">
                            <a class="page-link" href="/?p=<%= i %>"><%= i %></a>
                        </li>
                    <% } %>
                    <% if (parseInt(currpage)+parseInt(2) < pages) { %>
                        <li class="page-item disabled">
                            <a class="page-link" href="#">...</a>
                        </li>
                    <% } %>
                <% } %>  
                <li class="page-item <% if (currpage >= pages) { %> disabled <% } %>">
                    <% var nextPage = parseInt(currpage)+parseInt(1); %>
                    <a class="page-link" href="/?p=<%= nextPage  %>">Next</a>
                </li>
            </ul>
            </nav>
        </section>
<% include ../partials/footer %> 
        